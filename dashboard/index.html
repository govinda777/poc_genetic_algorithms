<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Game Genetic Algorithm Dashboard</title>
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- External Dependencies -->
    <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/chart.js@3.7.0/dist/chart.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <!-- Dashboard Root Element -->
    <div id="dashboard-root"></div>
    
    <!-- Dashboard Scripts - Load in correct order for dependencies -->
    <script type="text/babel">
        // Define a global variable to store mock data
        window.mockData = {
            session_id: 'mock_session',
            current: {
                generation: 42,
                best_fitness: 789.5,
                avg_fitness: 456.2,
                max_size: 15,
                diversity: 0.75,
                alive_agents: 87,
                training_time: '1h 23m 45s'
            },
            charts: {
                generations: Array.from({ length: 42 }, (_, i) => i + 1),
                best_fitness: Array.from({ length: 42 }, () => Math.random() * 1000),
                avg_fitness: Array.from({ length: 42 }, () => Math.random() * 500),
                diversity: Array.from({ length: 42 }, () => Math.random()),
                max_size: Array.from({ length: 42 }, () => Math.floor(Math.random() * 20) + 3)
            },
            best_agent: {
                generation: 42,
                fitness: 789.5,
                food_eaten: 12,
                steps_taken: 567,
                weights: Array.from({ length: 500 }, () => Math.random() * 2 - 1)
            }
        };
    </script>
    
    <!-- Simple Dashboard Implementation -->
    <script type="text/babel">
        // Simple Chart Component
        const ChartComponent = ({ type, labels, datasets, options }) => {
            return (
                <div className="chart-container">
                    <div className="mock-chart">
                        <div className="mock-chart-header">
                            <h4>{type.toUpperCase()} Chart</h4>
                            <p>Chart visualization</p>
                        </div>
                    </div>
                </div>
            );
        };
        
        // Footer Component
        const Footer = () => {
            return (
                <footer className="dashboard-footer">
                    <div className="footer-content">
                        <div className="footer-section">
                            <h3>Snake Game Genetic Algorithm POC</h3>
                            <p>A proof of concept for studying genetic algorithms</p>
                        </div>
                    </div>
                    <div className="footer-bottom">
                        <p>&copy; {new Date().getFullYear()} Snake Game Genetic Algorithm POC</p>
                    </div>
                </footer>
            );
        };
        
        // Side Left Component
        const SideLeft = ({ data }) => {
            if (!data || !data.current) {
                return <div className="side-panel side-left">Loading data...</div>;
            }
            
            const { current, charts } = data;
            
            return (
                <div className="dashboard-side-left">
                    <h2>Training Statistics</h2>
                    <div className="stats-container">
                        <div className="stat-card">
                            <h3>Generation</h3>
                            <div className="stat-value">{current.generation}</div>
                        </div>
                        <div className="stat-card">
                            <h3>Alive Agents</h3>
                            <div className="stat-value">{current.alive_agents}</div>
                        </div>
                        <div className="stat-card">
                            <h3>Diversity</h3>
                            <div className="stat-value">{(current.diversity * 100).toFixed(1)}%</div>
                        </div>
                        <div className="stat-card">
                            <h3>Training Time</h3>
                            <div className="stat-value">{current.training_time}</div>
                        </div>
                    </div>
                    <div className="charts-container">
                        <div className="chart-wrapper">
                            <h3>Fitness Evolution</h3>
                            <ChartComponent type="line" />
                        </div>
                    </div>
                </div>
            );
        };
        
        // Side Right Component
        const SideRight = ({ data }) => {
            if (!data || !data.best_agent) {
                return <div className="dashboard-side-right">Loading data...</div>;
            }
            
            const { best_agent } = data;
            
            return (
                <div className="dashboard-side-right">
                    <h2>Best Agent</h2>
                    <div className="agent-stats">
                        <div className="stat-card">
                            <h3>Fitness</h3>
                            <div className="stat-value">{best_agent.fitness.toFixed(2)}</div>
                        </div>
                        <div className="stat-card">
                            <h3>Food Eaten</h3>
                            <div className="stat-value">{best_agent.food_eaten}</div>
                        </div>
                        <div className="stat-card">
                            <h3>Snake Size</h3>
                            <div className="stat-value">{best_agent.food_eaten + 3}</div>
                        </div>
                        <div className="stat-card">
                            <h3>Steps Taken</h3>
                            <div className="stat-value">{best_agent.steps_taken}</div>
                        </div>
                    </div>
                </div>
            );
        };
        
        // Core Component
        const Core = () => {
            const [data, setData] = React.useState(window.mockData);
            
            return (
                <div className="dashboard">
                    <header className="dashboard-header">
                        <h1>Snake Game Genetic Algorithm Dashboard</h1>
                        <div className="controls">
                            <button>Use Mock Data</button>
                        </div>
                    </header>
                    
                    <div className="dashboard-content">
                        <div className="panels">
                            <SideLeft data={data} />
                            <SideRight data={data} />
                        </div>
                        <Footer />
                    </div>
                </div>
            );
        };
        
        // Dashboard Component
        const Dashboard = () => {
            return (
                <div className="dashboard-container">
                    <Core />
                </div>
            );
        };
        
        // Render the Dashboard
        ReactDOM.render(
            <Dashboard />,
            document.getElementById('dashboard-root')
        );
    </script>
</body>
</html>